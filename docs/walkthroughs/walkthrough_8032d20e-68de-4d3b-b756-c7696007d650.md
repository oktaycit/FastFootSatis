# Puantaj Takip Sistemi â€“ TamamlandÄ±

## Ne YapÄ±ldÄ±

Ã‡alÄ±ÅŸanlarÄ±n iÅŸe giriÅŸ/Ã§Ä±kÄ±ÅŸ saatlerini takip edecek tam teÅŸekkÃ¼llÃ¼ bir **puantaj modÃ¼lÃ¼** eklendi.

---

## DeÄŸiÅŸen Dosyalar

### 1. [database.py](file:///Users/oktaycit/Projeler/FastFootSatÄ±s/database.py)

`init_database()` iÃ§ine yeni **`puantaj` tablosu** eklendi:

```sql
CREATE TABLE IF NOT EXISTS puantaj (
    id              SERIAL PRIMARY KEY,
    personel_adi    TEXT NOT NULL,
    rol             TEXT NOT NULL DEFAULT 'garson',
    tarih           DATE NOT NULL DEFAULT CURRENT_DATE,
    giris_saati     TIMESTAMP NOT NULL,
    cikis_saati     TIMESTAMP,
    toplam_dakika   INTEGER,          -- Ã§Ä±kÄ±ÅŸta otomatik hesaplanÄ±r
    notlar          TEXT,
    olusturma_tarihi TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

Eklenen metotlar:
| Metot | AÃ§Ä±klama |
|-------|---------|
| `add_puantaj_record()` | Yeni giriÅŸ kaydÄ± ekler |
| `update_puantaj_checkout()` | Ã‡Ä±kÄ±ÅŸ saati kaydeder, `toplam_dakika` hesaplar |
| `get_puantaj_records()` | Tarih aralÄ±ÄŸÄ± + personel filtreli liste |
| `get_puantaj_monthly_summary()` | AylÄ±k kiÅŸi bazlÄ± Ã¶zet (gÃ¼n + dakika) |
| `delete_puantaj_record()` | KayÄ±t siler |

---

### 2. [web_server.py](file:///Users/oktaycit/Projeler/FastFootSatÄ±s/web_server.py)

Yeni route'lar ve API endpoint'leri eklendi:

| Method | URL | AÃ§Ä±klama |
|--------|-----|---------|
| GET | `/puantaj` | Puantaj HTML sayfasÄ±nÄ± servis eder |
| GET | `/personel` | Personel yÃ¶netim sayfasÄ±nÄ± servis eder |
| GET | `/api/puantaj` | KayÄ±tlarÄ± listele (`?tarih=` veya `?ay=`) |
| GET | `/api/kitchen` | Mutfak personeli listesi |
| POST | `/api/kitchen` | Yeni mutfak personeli ekle |
| DELETE | `/api/kitchen/<idx>` | Mutfak personeli sil |
| GET | `/api/puantaj/ozet` | AylÄ±k personel bazlÄ± Ã¶zet |

---

### 3. [puantaj.html](file:///Users/oktaycit/Projeler/FastFootSatÄ±s/web/puantaj.html) *(YENÄ°)*

Ä°ki sekmeli modern arayÃ¼z:

**ğŸ“‹ GÃ¼nlÃ¼k Puantaj sekmesi:**
- Yeni kayÄ±t formu: personel adÄ± (autocomplete), rol (**Mutfak eklendi**), giriÅŸ/Ã§Ä±kÄ±ÅŸ saati, not
- Tarih + personel filtresi ile tablo
- "ğŸ Ã‡Ä±kÄ±ÅŸ" butonu aÃ§Ä±k kayÄ±tlarda gÃ¶rÃ¼nÃ¼r â†’ modal ile Ã§Ä±kÄ±ÅŸ kaydeder
- Ã‡alÄ±ÅŸma sÃ¼resi Ã§ubuk gÃ¶stergesi

**ğŸ“… AylÄ±k Ã–zet sekmesi:**
- Ay seÃ§ici
- Toplam Ã§alÄ±ÅŸma saati, personel sayÄ±sÄ±, kayÄ±t sayÄ±sÄ± Ã¶zet kartlarÄ±
- KiÅŸi bazlÄ± toplam gÃ¼n & saat tablosu, progress bar

---

### 4. [settings.html](file:///Users/oktaycit/Projeler/FastFootSatÄ±s/web/settings.html) & [personel.html](file:///Users/oktaycit/Projeler/FastFootSatÄ±s/web/personel.html)

- **Settings:** Personel YÃ¶netimi kartÄ±na **ğŸ“Š Puantaj** butonu eklendi.
- **Personel:** Garson, Kasiyer ve Kurye sekmelerine ek olarak **ğŸ³ Mutfak Personeli** sekmesi eklendi. Mutfak personeli de buradan kolayca tanÄ±mlanÄ±p silinebilir.

---

## KullanÄ±m

1. Sunucuyu baÅŸlatÄ±n: `make run`
2. Ayarlar sayfasÄ±ndan **ğŸ“Š Puantaj** butonuna tÄ±klayÄ±n ya da doÄŸrudan `/puantaj` adresine gidin
3. **GÃ¼nlÃ¼k Puantaj** sekmesinde personel adÄ± girip **âœ… Kaydet**'e basÄ±n
4. GÃ¼n sonunda **ğŸ Ã‡Ä±kÄ±ÅŸ** butonu ile Ã§Ä±kÄ±ÅŸ saatini kaydedin
5. **ğŸ“… AylÄ±k Ã–zet** sekmesinde aylÄ±k Ã§alÄ±ÅŸma istatistiklerini gÃ¶rÃ¼ntÃ¼leyin

> **Not:** Puantaj Ã¶zellikleri yalnÄ±zca PostgreSQL baÄŸlantÄ±sÄ± aktif olduÄŸunda Ã§alÄ±ÅŸÄ±r (`USE_DATABASE = True`). VeritabanÄ± ilk baÅŸlatmada `puantaj` tablosunu otomatik oluÅŸturur.
